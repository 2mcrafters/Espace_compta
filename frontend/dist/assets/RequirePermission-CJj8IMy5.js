var q=n=>{throw TypeError(n)};var I=(n,e,t)=>e.has(n)||q("Cannot "+t);var r=(n,e,t)=>(I(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?q("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),w=(n,e,t,s)=>(I(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),P=(n,e,t)=>(I(n,e,"access private method"),t);import{S as V,f as W,h as D,g as Y,n as F,d as _,r as i,i as J,k as X,M as Z,j as M,o as G,P as ee,p as te,q as se,L as ne,a as ie,e as re}from"./index-BMkIZVNk.js";var v,g,d,x,b,K,U,B,oe=(B=class extends V{constructor(e,t){super();S(this,b);S(this,v);S(this,g);S(this,d);S(this,x);w(this,v,e),this.setOptions(t),this.bindMethods(),P(this,b,K).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const t=this.options;this.options=r(this,v).defaultMutationOptions(e),W(this.options,t)||r(this,v).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,d),observer:this}),t!=null&&t.mutationKey&&this.options.mutationKey&&D(t.mutationKey)!==D(this.options.mutationKey)?this.reset():((s=r(this,d))==null?void 0:s.state.status)==="pending"&&r(this,d).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=r(this,d))==null||e.removeObserver(this)}onMutationUpdate(e){P(this,b,K).call(this),P(this,b,U).call(this,e)}getCurrentResult(){return r(this,g)}reset(){var e;(e=r(this,d))==null||e.removeObserver(this),w(this,d,void 0),P(this,b,K).call(this),P(this,b,U).call(this)}mutate(e,t){var s;return w(this,x,t),(s=r(this,d))==null||s.removeObserver(this),w(this,d,r(this,v).getMutationCache().build(r(this,v),this.options)),r(this,d).addObserver(this),r(this,d).execute(e)}},v=new WeakMap,g=new WeakMap,d=new WeakMap,x=new WeakMap,b=new WeakSet,K=function(){var t;const e=((t=r(this,d))==null?void 0:t.state)??Y();w(this,g,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},U=function(e){F.batch(()=>{var t,s,h,p,l,u,C,a;if(r(this,x)&&this.hasListeners()){const o=r(this,g).variables,f=r(this,g).context,m={client:r(this,v),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((s=(t=r(this,x)).onSuccess)==null||s.call(t,e.data,o,f,m),(p=(h=r(this,x)).onSettled)==null||p.call(h,e.data,null,o,f,m)):(e==null?void 0:e.type)==="error"&&((u=(l=r(this,x)).onError)==null||u.call(l,e.error,o,f,m),(a=(C=r(this,x)).onSettled)==null||a.call(C,void 0,e.error,o,f,m))}this.listeners.forEach(o=>{o(r(this,g))})})},B);function fe(n,e){const t=_(),[s]=i.useState(()=>new oe(t,n));i.useEffect(()=>{s.setOptions(n)},[s,n]);const h=i.useSyncExternalStore(i.useCallback(l=>s.subscribe(F.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),p=i.useCallback((l,u)=>{s.mutate(l,u).catch(J)},[s]);if(h.error&&X(s.options.throwOnError,[h.error]))throw h.error;return{...h,mutate:p,mutateAsync:h.mutate}}class ue extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ae({children:n,isPresent:e}){const t=i.useId(),s=i.useRef(null),h=i.useRef({width:0,height:0,top:0,left:0}),{nonce:p}=i.useContext(Z);return i.useInsertionEffect(()=>{const{width:l,height:u,top:C,left:a}=h.current;if(e||!s.current||!l||!u)return;s.current.dataset.motionPopId=t;const o=document.createElement("style");return p&&(o.nonce=p),document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            top: ${C}px !important;
            left: ${a}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[e]),M.jsx(ue,{isPresent:e,childRef:s,sizeRef:h,children:i.cloneElement(n,{ref:s})})}const he=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:h,presenceAffectsLayout:p,mode:l})=>{const u=G(le),C=i.useId(),a=i.useCallback(f=>{u.set(f,!0);for(const m of u.values())if(!m)return;s&&s()},[u,s]),o=i.useMemo(()=>({id:C,initial:e,isPresent:t,custom:h,onExitComplete:a,register:f=>(u.set(f,!1),()=>u.delete(f))}),p?[Math.random(),a]:[t,a]);return i.useMemo(()=>{u.forEach((f,m)=>u.set(m,!1))},[t]),i.useEffect(()=>{!t&&!u.size&&s&&s()},[t]),l==="popLayout"&&(n=M.jsx(ae,{isPresent:t,children:n})),M.jsx(ee.Provider,{value:o,children:n})};function le(){return new Map}const j=n=>n.key||"";function T(n){const e=[];return i.Children.forEach(n,t=>{i.isValidElement(t)&&e.push(t)}),e}const pe=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:h=!0,mode:p="sync",propagate:l=!1})=>{const[u,C]=te(l),a=i.useMemo(()=>T(n),[n]),o=l&&!u?[]:a.map(j),f=i.useRef(!0),m=i.useRef(a),O=G(()=>new Map),[H,N]=i.useState(a),[R,A]=i.useState(a);se(()=>{f.current=!1,m.current=a;for(let y=0;y<R.length;y++){const c=j(R[y]);o.includes(c)?O.delete(c):O.get(c)!==!0&&O.set(c,!1)}},[R,o.length,o.join("-")]);const k=[];if(a!==H){let y=[...a];for(let c=0;c<R.length;c++){const E=R[c],z=j(E);o.includes(z)||(y.splice(c,0,E),k.push(E))}p==="wait"&&k.length&&(y=k),A(T(y)),N(a);return}const{forceRender:L}=i.useContext(ne);return M.jsx(M.Fragment,{children:R.map(y=>{const c=j(y),E=l&&!u?!1:a===R||o.includes(c),z=()=>{if(O.has(c))O.set(c,!0);else return;let $=!0;O.forEach(Q=>{Q||($=!1)}),$&&(L==null||L(),A(m.current),l&&(C==null||C()),s&&s())};return M.jsx(he,{isPresent:E,initial:!f.current||t?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:h,mode:p,onExitComplete:E?void 0:z,children:y},c)})})};function me({perm:n,children:e,fallback:t=null}){const s=ie(re);return!!s&&Array.isArray(s.permissions)&&s.permissions.includes(n)?e:t??M.jsxs("div",{className:"text-sm text-red-600",children:["403 — You don’t have permission: ",n]})}export{pe as A,me as R,fe as u};
