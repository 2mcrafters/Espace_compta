import{b as w,f as N,R as o,j as e,d as f}from"./index-6jc1YW1i.js";import{B as h}from"./Button-DWzqGaEt.js";function E(){const s=w(N),[i,c]=o.useState((s==null?void 0:s.name)||""),[m,p]=o.useState((s==null?void 0:s.email)||""),[u,x]=o.useState(!1),[g,l]=o.useState("");o.useEffect(()=>{c((s==null?void 0:s.name)||""),p((s==null?void 0:s.email)||"")},[s]);async function j(a){var r,n;a.preventDefault(),x(!0),l("");try{await f.put("/profile",{name:i,email:m}),l("Profil mis à jour")}catch(t){l(((n=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:n.message)||t.message)}finally{x(!1)}}async function y(a){var t,b;a.preventDefault(),l("");const r=a.currentTarget,n={current_password:r.current_password.value,password:r.password.value,password_confirmation:r.password_confirmation.value};try{await f.post("/profile/password",n),l("Mot de passe changé"),r.reset()}catch(d){l(((b=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:b.message)||d.message)}}return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Profil"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nom"}),e.jsx("input",{className:"w-full border rounded-lg px-3 py-2",value:i,onChange:a=>c(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Email"}),e.jsx("input",{className:"w-full border rounded-lg px-3 py-2",value:m,onChange:a=>p(a.target.value)})]}),e.jsx(h,{type:"submit",disabled:u,className:"!from-primary-600 !to-primary-700",children:u?"Enregistrement...":"Enregistrer"}),g&&e.jsx("div",{className:"text-sm text-gray-600",children:g})]})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Mot de passe"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Mot de passe actuel"}),e.jsx("input",{name:"current_password",type:"password",className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nouveau mot de passe"}),e.jsx("input",{name:"password",type:"password",className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Confirmer"}),e.jsx("input",{name:"password_confirmation",type:"password",className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsx(h,{type:"submit",className:"!from-emerald-500 !to-green-600",children:"Changer"})]})]})]})}export{E as default};
