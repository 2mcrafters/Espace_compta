import{j as e,R as g,m as x,L as M,d as j}from"./index-pDHLf4_7.js";import{u as k}from"./useQuery-kMVKj7Cj.js";import{I as w}from"./Input-GRIl-wof.js";import{B as $}from"./Button-CzOS0oQW.js";function B({start:s,end:i,onChange:n,className:r=""}){return e.jsxs("div",{className:`flex items-end gap-3 ${r}`,children:[e.jsx(w,{label:"Du",type:"date",value:s??"",onChange:o=>n==null?void 0:n({start:o.target.value,end:i})}),e.jsx(w,{label:"Au",type:"date",value:i??"",onChange:o=>n==null?void 0:n({start:s,end:o.target.value})})]})}function z(s,i){return k({queryKey:["productivity",s,i],queryFn:async()=>{const{data:n}=await j.get("/reports/productivity",{params:{from:s,to:i}});return n},enabled:!!s&&!!i})}function W(){return k({queryKey:["tasks"],queryFn:async()=>{const{data:s}=await j.get("/tasks");return Array.isArray(s)?s:(s==null?void 0:s.data)||[]}})}function D(s=5){return k({queryKey:["time-entries",s],queryFn:async()=>{const{data:i}=await j.get("/time-entries",{params:{per_page:s}});return(i==null?void 0:i.data)||[]}})}function q(){var b,N;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),1).toISOString().slice(0,10),n=new Date(s.getFullYear(),s.getMonth()+1,0).toISOString().slice(0,10),[r,o]=g.useState({start:i,end:n}),{data:a,isLoading:h}=z(r.start,r.end),{data:m=[]}=W(),{data:p=[]}=D(5),{data:l}=k({queryKey:["overview"],queryFn:async()=>(await j.get("/overview")).data}),f=g.useMemo(()=>{var t;return a&&((t=a.per_client)==null?void 0:t.reduce((d,c)=>d+Number(c.minutes||0),0))||0},[a]),C=g.useMemo(()=>{const t=(a==null?void 0:a.per_client)||[];if(t.length===0)return"—";const d=t.reduce((c,u)=>Number(u.minutes)>Number(c.minutes)?u:c,t[0]);return`Client #${d.client_id} (${d.minutes}m)`},[a]);g.useMemo(()=>{const t=(a==null?void 0:a.per_user)||[];if(t.length===0)return"—";const d=t.reduce((c,u)=>Number(u.minutes)>Number(c.minutes)?u:c,t[0]);return`User #${d.user_id} (${d.minutes}m)`},[a]);const y=g.useMemo(()=>!m||m.length===0?{total:0,todo:0,inProgress:0,done:0,urgent:0}:{total:m.length,todo:m.filter(t=>t.status==="todo"||!t.status).length,inProgress:m.filter(t=>t.status==="in_progress").length,done:m.filter(t=>t.status==="done").length,urgent:m.filter(t=>t.priority>=4).length},[m]),_=[{title:"Temps total",value:(t=>{const d=Math.floor(t/60),c=t%60;return d>0?`${d}h ${c}m`:`${c}m`})(f),subtitle:`${f} minutes`,icon:e.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),color:"from-primary-400 to-primary-600",textColor:"text-primary-700",link:"/reports"},{title:"Tâches actives",value:y.inProgress,subtitle:`${y.total} total`,icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),color:"from-blue-500 to-sky-600",textColor:"text-sky-600",link:"/tasks"},{title:"Tâches urgentes",value:y.urgent,subtitle:"Priorité haute",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),color:"from-orange-500 to-red-500",textColor:"text-red-600",link:"/tasks"},{title:"Meilleur client",value:C,subtitle:"Ce mois",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),color:"from-purple-500 to-pink-500",textColor:"text-pink-600",link:"/clients"},{title:"Clients actifs",value:((b=l==null?void 0:l.counts)==null?void 0:b.clients)??"—",subtitle:"Total",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),color:"from-emerald-500 to-green-600",textColor:"text-emerald-600",link:"/clients"},{title:"Documents",value:((N=l==null?void 0:l.counts)==null?void 0:N.docs)??"—",subtitle:"Fichiers",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),color:"from-indigo-500 to-purple-600",textColor:"text-indigo-600",link:"/clients"}];return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-gray-100 dark:to-gray-400 bg-clip-text text-transparent mb-2",children:"Tableau de bord"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"Vue d'ensemble de votre productivité"})]}),e.jsxs("div",{className:"flex flex-wrap items-end gap-2 sm:gap-3",children:[e.jsx(B,{start:r.start,end:r.end,onChange:o}),e.jsx("a",{target:"_blank",rel:"noreferrer",href:"http://127.0.0.1:8002/api/exports/time-excel",children:e.jsxs($,{className:"!from-emerald-500 !to-green-600 !shadow-emerald-500/30 hover:!shadow-emerald-500/50 hover:!from-emerald-600 hover:!to-green-700",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exporter (Excel)"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:_.map((t,d)=>{const c=t.link?M:"div",u=t.link?{to:t.link}:{};return e.jsx(x.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:d*.1},className:"group",children:e.jsx(c,{...u,className:"block relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4 sm:p-6 shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer",children:e.jsxs(x.div,{whileHover:{y:-8,scale:1.02,transition:{type:"spring",stiffness:300}},className:"relative",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-gradient-to-br ${t.color} opacity-10 dark:opacity-20 rounded-full -translate-y-1/2 translate-x-1/2 group-hover:opacity-20 dark:group-hover:opacity-30 transition-opacity duration-300`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/50 dark:via-white/10 to-transparent opacity-0 group-hover:opacity-100 transform -translate-x-full group-hover:translate-x-full transition-all duration-1000"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t.title}),t.subtitle&&e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:t.subtitle})]}),e.jsx("div",{className:`relative p-2 sm:p-3 rounded-xl bg-gradient-to-br ${t.color} text-white shadow-lg group-hover:shadow-xl transition-shadow duration-300`,children:e.jsx("div",{className:"relative w-6 h-6 sm:w-auto sm:h-auto",children:t.icon})})]}),e.jsx("div",{className:`text-2xl sm:text-3xl font-bold ${t.textColor} mb-1 truncate`,children:h?e.jsx("div",{className:"h-8 sm:h-9 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-20 sm:w-24"}):t.value}),t.link&&e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 flex items-center gap-1 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:[e.jsx("span",{children:"Voir détails"}),e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})},d)})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[e.jsx(v,{title:"Nouveau client",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),link:"/clients",color:"from-blue-500 to-sky-600"}),e.jsx(v,{title:"Nouvelle tâche",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),link:"/tasks",color:"from-purple-500 to-pink-500"}),e.jsx(v,{title:"Temps enregistré",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),link:"/tasks",color:"from-emerald-500 to-green-600"}),e.jsx(v,{title:"Rapports",icon:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),link:"/reports",color:"from-orange-500 to-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(L,{title:"Minutes par client",data:((a==null?void 0:a.per_client)||[]).map(t=>({label:`C${t.client_id}`,value:Number(t.minutes||0)})),isLoading:h}),e.jsx(L,{title:"Minutes par collaborateur",data:((a==null?void 0:a.per_user)||[]).map(t=>({label:`U${t.user_id}`,value:Number(t.minutes||0)})),isLoading:h}),e.jsx(H,{taskStats:y}),e.jsx(T,{entries:p}),e.jsxs("div",{className:"lg:col-span-2 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 sm:p-6 shadow-lg transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-4 text-gray-900 dark:text-gray-100",children:"Activité récente"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Nouveaux documents"}),e.jsx("ul",{className:"space-y-2",children:((l==null?void 0:l.recent_docs)||[]).length>0?((l==null?void 0:l.recent_docs)||[]).map(t=>e.jsxs("li",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-primary-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{className:"truncate",children:[t.title," ",e.jsxs("span",{className:"text-gray-400 dark:text-gray-500",children:["(",t.category||"—",")"]})]})]},t.id)):e.jsx("li",{className:"text-xs sm:text-sm text-gray-400 dark:text-gray-500 italic",children:"Aucun document récent"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Nouveaux clients"}),e.jsx("ul",{className:"space-y-2",children:((l==null?void 0:l.recent_clients)||[]).length>0?((l==null?void 0:l.recent_clients)||[]).map(t=>e.jsxs("li",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-emerald-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"truncate",children:t.raison_sociale})]},t.id)):e.jsx("li",{className:"text-xs sm:text-sm text-gray-400 dark:text-gray-500 italic",children:"Aucun client récent"})})]})]})]})]})]})}function L({title:s,data:i,isLoading:n}){const r=Math.max(1,...i.map(o=>o.value));return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 sm:p-6 shadow-lg transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-4 sm:mb-6 text-gray-900 dark:text-gray-100",children:s}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:n?Array.from({length:3}).map((o,a)=>e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 sm:w-12 h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"flex-1 h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-10 sm:w-12 h-3 sm:h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]},a)):i.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Aucune donnée"})]}):i.map((o,a)=>e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.05},className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-10 sm:w-12 text-xs font-medium text-gray-600 dark:text-gray-400",children:o.label}),e.jsx("div",{className:"flex-1 h-6 sm:h-8 bg-gradient-to-r from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-600 rounded-lg overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${o.value/r*100}%`},transition:{duration:1,delay:a*.1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary-500 to-primary-700 rounded-lg shadow-sm"})}),e.jsxs("div",{className:"w-10 sm:w-12 text-xs font-semibold text-gray-900 dark:text-gray-100 text-right",children:[o.value,"m"]})]},a))})]})}function v({title:s,icon:i,link:n,color:r}){return e.jsx(M,{to:n,children:e.jsxs(x.div,{whileHover:{scale:1.05,y:-4},whileTap:{scale:.98},className:`relative overflow-hidden rounded-xl bg-gradient-to-br ${r} p-4 sm:p-6 text-white shadow-lg hover:shadow-2xl transition-all duration-300 cursor-pointer group`,children:[e.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:[e.jsx("div",{className:"font-semibold text-sm sm:text-base lg:text-lg text-center sm:text-left",children:s}),e.jsx("div",{className:"p-1.5 sm:p-2 bg-white/20 rounded-lg backdrop-blur-sm group-hover:bg-white/30 transition-colors",children:i})]}),e.jsx("div",{className:"mt-2 text-xs sm:text-sm text-white/80 group-hover:text-white transition-colors text-center sm:text-left",children:"Accès rapide →"})]})})}function H({taskStats:s}){const i=[{label:"À faire",value:s.todo,color:"from-gray-400 to-gray-500"},{label:"En cours",value:s.inProgress,color:"from-blue-500 to-sky-600"},{label:"Terminé",value:s.done,color:"from-emerald-500 to-green-600"}],n=s.total||1;return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 sm:p-6 shadow-lg transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-4 sm:mb-6 text-gray-900 dark:text-gray-100",children:"Distribution des tâches"}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:i.map((r,o)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:r.label}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[r.value," (",Math.round(r.value/n*100),"%)"]})]}),e.jsx("div",{className:"h-2 sm:h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx(x.div,{initial:{width:0},animate:{width:`${r.value/n*100}%`},transition:{duration:1,delay:o*.1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${r.color} rounded-full shadow-sm`})})]},o))}),s.urgent>0&&e.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("span",{className:"font-semibold",children:[s.urgent," tâches urgentes"]})]})})]})}function T({entries:s}){const i=r=>{if(!r)return"—";const o=new Date(r);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(o)},n=r=>{if(!r.started_at)return"—";const o=new Date(r.started_at),a=r.ended_at?new Date(r.ended_at):new Date,h=Math.floor((a-o)/6e4),m=Math.floor(h/60),p=h%60;return m>0?`${m}h ${p}m`:`${p}m`};return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4 sm:p-6 shadow-lg transition-colors duration-300",children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-4 sm:mb-6 text-gray-900 dark:text-gray-100",children:"Entrées de temps récentes"}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:s.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-400 dark:text-gray-500",children:[e.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Aucune entrée récente"})]}):s.map((r,o)=>e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},className:"flex items-center gap-2 sm:gap-4 p-2 sm:p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 rounded-lg bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center text-white shadow-lg",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"text-sm sm:text-base font-medium text-gray-900 dark:text-gray-100 truncate",children:["Tâche #",r.task_id]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:i(r.started_at)})]}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsx("div",{className:"text-sm sm:text-base font-semibold text-primary-600 dark:text-primary-400",children:n(r)}),!r.ended_at&&e.jsxs("div",{className:"text-xs text-emerald-500 font-medium flex items-center justify-end gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"En cours"]})]})]},r.id))})]})}export{q as default};
